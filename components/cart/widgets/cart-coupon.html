

{{#component "script" src="./cart-coupon.js" | asset_url() /}}

<theme-cart-coupon class="cart-coupon">
  <div class="cart-coupon__form">
    <label class="field">
      <input class="field__input" name="_" placeholder="{{ `transaction.discount.coupon_code` | t() }}"/>
      <span class="field__label body3">{{ "transaction.discount.coupon_code" | t() }}</span>
    </label>
    <button class="button cart-coupon__button">
      {{ "sales.general.apply_common" | t() }} {{#component "icons/loading" class="button__spinner" /}}
    </button>
  </div>

  <div class="cart-coupon__error field__info field__info--error"></div>

  
  {{#capture has_valid_coupon }}
    {{~#for item in cart.discount_applications ~}}
      {{~#if item.code && item.status == "enable" ~}}
        true
        {{#break/}}
      {{~/if~}}
    {{~/for~}}
  {{/capture}}

  {{#if has_valid_coupon }}
    <ul class="cart-coupon__list">
      {{#for item in cart.discount_applications }}
        {{#if item.code && item.status == "enable" }}
          <li class="cart-coupon__list-item" data-code="{{ item.code }}">
            <span class="cart-coupon__list-tag">{{#component "icons/bookmark" /}}</span>
            <span class="body4 cart-coupon__list-code">{{ item.code }}</span>
            <i class="cart-coupon__list-close">{{#component "icons/close" /}}</i>
          </li>
        {{/if}}
      {{/for}}
    </ul>
  {{/if}}

  
  {{#capture has_invalid_coupon }}
    {{~#for item in cart.discount_applications ~}}
      {{~#if item.code && item.status == "unable" ~}}
        true
        {{#break/}}
      {{~/if~}}
    {{~/for~}}
  {{/capture}}

  
  {{#if has_valid_coupon && has_invalid_coupon }}
    <div class="cart-coupon__dividing-line"></div>
  {{/if}}

  {{#if has_invalid_coupon }}
    <div class="cart-coupon__list-expired">
      <div class="cart-coupon__list-warning body6">The coupon code has expired.</div>
      <ul class="cart-coupon__list">
        {{#for item in cart.discount_applications }}
          {{#if item.code && item.status == "unable" }}
            <li class="cart-coupon__list-item" data-code="{{ item.code }}">
              <span class="cart-coupon__list-tag cart-coupon__list-tag--wraning">
                {{#component "icons/warning-circle" /}}
              </span>
              <span class="body4 cart-coupon__list-code">{{ item.code }}</span>
              <i class="cart-coupon__list-close">{{#component "icons/close" /}}</i>
            </li>
          {{/if}}
        {{/for}}
      </ul>
    </div>
  {{/if}}
</theme-cart-coupon>
